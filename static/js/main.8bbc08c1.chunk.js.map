{"version":3,"sources":["constants.js","spacing.js","flex/index.js","section.js","scratch-card/scratch-card-sc.js","scratch-card/scratch-card-content-sc.js","scratch-card/canvas-wrapper-sc.js","utils.js","scratch-card/index.js","flex/flex-item.js","local-storage.js","pages/main-page.js","buttons/button-outer-sc.js","buttons/button-inner-sc.js","buttons/button.js","buttons/primary-button/primary-button.js","buttons/primary-button/index.js","pie-chart.js","prize-item.js","pages/admin-page.js","App.js","index.js"],"names":["neutrals","border","colors","concat","fontSizes","huge","unit","bigger","big","normal","small","smaller","layout","subUnit","tapSize","desktopWidthMax","sidebarWidth","inputHeight","spacing","-sm","negSubUnit","-md","-lg","-xlg","sm","md","lg","xlg","setSpacingValue","direction","value","calcSpacingValues","spacingUnit","topDirection","rightDirection","bottomDirection","leftDirection","top","right","bottom","left","marginSpacing","props","margin","marginTop","marginRight","marginBottom","marginLeft","Spacing","styled","div","_templateObject","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","Flex","flex_templateObject","_ref","inline","_ref2","alignItems","_ref3","justifyContent","_ref4","flexDirection","displayName","borderConstant","color","darkColor","radius","shorthand","Section","section_templateObject","overflowX","overflowY","display","height","_ref5","maxHeight","_ref6","minHeight","_ref7","width","_ref8","maxWidth","_ref9","minWidth","_ref10","background","_ref11","_ref12","borderRadius","_ref13","boxShadow","_ref14","_ref15","textAlign","ScratchCardSC","scratch_card_sc_templateObject","ScratchCardContentSC","scratch_card_content_sc_templateObject","CanvasWrapperSC","canvas_wrapper_sc_templateObject","getOffset","element","offset","clientRect","getBoundingClientRect","offsetTop","offsetLeft","offsetParent","deltaLeft","deltaTop","Math","abs","ScratchCard","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","scratching","throttle","event","preventDefault","refs","canvas","updatePos","ctx","globalCompositeOperation","save","brush","brushImage","error","Error","console","message","angle","atan2","yPos","xPos","translate","rotate","drawImage","beginPath","arc","PI","fill","closePath","restore","updatePercentScratched","mouseScratch","addEventListener","document","body","cancelScratch","removeEventListener","touchScratch","recalculateOffset","state","foregroundRendered","percentScratched","isCleared","bind","assertThisInitialized","_this2","_this$props","imgURL","setState","_this$refs$canvas","image","Image","src","onload","fillStyle","fillRect","type","clientX","clientY","touches","counter","_this$refs$canvas2","_this$props2","_this$props2$subRectR","subRectRatio","_this$props2$percentT","percentToClear","imageData","getImageData","round","imageDataLength","data","length","i","newPercentScratched","clearCard","_this$props$onClear","onClear","window","_this3","Promise","resolve","reject","crossOrigin","onerror","then","getContext","renderForeground","prevProps","_this$props3","children","_this$state","react_default","a","createElement","scratch_card_sc","scratch_card_content_sc","React","Children","only","canvas_wrapper_sc","onContextMenu","ref","Component","FlexItem","flex_item_templateObject","flex","STORAGE_KEYS","setLocalStorage","sessionId","prize","IMG_SRC","PRIZE_ID","SESSION_ID","localStorage","getItem","clear","setItem","id","imageSrc","MainPage","loaded","handleCleared","fetch","method","JSON","stringify","headers","Content-type","response","json","Boolean","imgSrc","className","flex_item","scratch_card","alt","ButtonSC","button","attrs","button_outer_sc_templateObject","fullWidth","circle","pill","raised","ButtonInner","button_inner_sc_templateObject","sizeConfig","ButtonInnerSC","_templateObject2","size","leftAligned","button_outer_sc","assign","button_inner_sc","button_templateObject","PrimaryButton","Button","primary_button_templateObject","buttons_primary_button_templateObject","outline","COLORS","AVAILABLE","ASSIGNED","REDEEMED","PieChart","_ref$inventory","inventory","labels","datasets","available","assigned","redeemed","backgroundColor","hoverBackgroundColor","options","legend","fontColor","fontSize","src_spacing","es","PrizeItem","name","redeemPrize","pie_chart","buttons_primary_button","onClick","AdminPage","resetAssigned","debounce","asyncToGenerator","regenerator_default","mark","_callee","resetCount","wrap","_context","prev","next","sent","toast","stop","_callee2","_context2","_x","apply","arguments","successRate","intervalId","updateStatus","setInterval","clearInterval","Fragment","values","map","item","prize_item","configure","autoClose","position","POSITION","TOP_CENTER","App","react_router_dom","react_router","exact","path","component","ReactDOM","render","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.8bbc08c1.chunk.js","sourcesContent":["export const unit = 8\n\nexport const neutrals = {\n  neutral00: '#fff',\n  neutral10: '#edf1f3',\n  neutral15: '#dbdbdb',\n  neutral20: '#d9dfe3',\n  neutral25: '#8d9ba7',\n  neutral30: '#727272',\n  neutral40: '#3d464b',\n  neutral50: '#000'\n}\n\nexport const border = {\n  color: neutrals.neutral15,\n  radius: '4px',\n  shorthand: `1px solid ${neutrals.neutral15}`\n}\n\nexport const colors = {\n  red: '#D62828',\n  blue: '#094074',\n  yellow: '#FFDD4A',\n  lightBlue: '#dbe9f9',\n  messengerBlue: '#4990e2',\n  darkBlue: '#094074',\n  darkGreen: '#336534',\n  darkYellow: '#FCBF49',\n  white: '#fff',\n}\n\nexport const fontSizes = {\n  huge: `${unit * 3}px`, // 24px\n  bigger: `${unit * 2.25}px`, // 18px\n  big: `${unit * 2}px`, // 16px\n  normal: `${unit * 1.75}px`, // 14px\n  small: `${unit * 1.5}px`, // 12px\n  smaller: `${unit * 1.25}px` // 10px\n}\n\nexport const fontWeight = {\n  normal: 300,\n  semiBold: 400,\n  bold: 500\n}\n\nexport const layout = {\n  subUnit: `${unit / 2}px`,\n  unit: `${unit}px`,\n  tapSize: `${unit * 5}px`,\n  desktopWidthMax: '1600px',\n  sidebarWidth: '204px',\n  inputHeight: '34px'\n}\n\nexport const spacing = {\n  '-sm': layout.negSubUnit,\n  '-md': `-${unit * 1.5}px`,\n  '-lg': `-${unit * 2}px`,\n  '-xlg': `-${unit * 3}px`,\n  sm: layout.subUnit,\n  md: `${unit * 1.5}px`,\n  lg: `${unit * 2}px`,\n  xlg: `${unit * 3}px`\n}\n\nexport const typography = {\n  fontFamily: \"'Roboto', sans-serif\",\n  headerFontFamily: \"'Times', serif\"\n}\n","import styled from 'styled-components'\nimport {spacing} from './constants'\n\nconst setSpacingValue = (unit, direction) => {\n  const value = direction || unit\n\n  return value ? spacing[value] || value : 0\n}\n\nconst calcSpacingValues = (\n  spacingUnit,\n  topDirection,\n  rightDirection,\n  bottomDirection,\n  leftDirection\n) => {\n  const top = setSpacingValue(spacingUnit, topDirection)\n  const right = setSpacingValue(spacingUnit, rightDirection)\n  const bottom = setSpacingValue(spacingUnit, bottomDirection)\n  const left = setSpacingValue(spacingUnit, leftDirection)\n\n  return `${top} ${right} ${bottom} ${left}`\n}\n\nexport const marginSpacing = (props) =>\n  calcSpacingValues(\n    props.margin,\n    props.marginTop,\n    props.marginRight,\n    props.marginBottom,\n    props.marginLeft\n  )\n\nconst paddingSpacing = (props) =>\n  calcSpacingValues(\n    props.padding,\n    props.paddingTop,\n    props.paddingRight,\n    props.paddingBottom,\n    props.paddingLeft\n  )\n\nconst Spacing = styled.div`\n  margin: ${marginSpacing};\n  padding: ${paddingSpacing};\n`\n\nexport default Spacing\n","import styled from 'styled-components'\nimport Spacing from '../spacing'\n\nconst Flex = styled(Spacing)`\n  display: ${({inline}) => (inline ? 'inline-flex' : 'flex')};\n  align-items: ${({alignItems}) => alignItems || 'initial'};\n  justify-content: ${({justifyContent}) => justifyContent || 'initial'};\n  flex-direction: ${({flexDirection}) => flexDirection || 'initial'};\n`\n\nFlex.displayName = 'Flex'\n\nexport default Flex\n","import styled from 'styled-components'\nimport Flex from './flex'\n\nconst neutrals = {\n  neutral00: '#fff',\n  neutral10: '#edf1f3',\n  neutral15: '#dbdbdb',\n  neutral20: '#d9dfe3',\n  neutral25: '#8d9ba7',\n  neutral30: '#727272',\n  neutral40: '#3d464b',\n  neutral50: '#000'\n}\n\nconst borderConstant = {\n  color: neutrals.neutral15,\n  darkColor: neutrals.neutral40,\n  radius: '4px',\n  shorthand: `1px solid ${neutrals.neutral15}`\n}\nconst Section = styled(Flex)`\n  overflow-x: ${({overflowX}) => (overflowX ? overflowX : 'initial')};\n  overflow-y: ${({overflowY}) => (overflowY ? overflowY : 'initial')};\n  display: ${({display}) => (display ? display : 'block')};\n  height: ${({height}) => (height ? height : 'auto')};\n  max-height: ${({maxHeight}) => (maxHeight ? maxHeight : 'initial')};\n  min-height: ${({minHeight}) => (minHeight ? minHeight : 'initial')};\n  width: ${({width}) => (width ? width : 'auto')};\n  max-width: ${({maxWidth}) => (maxWidth ? maxWidth : 'initial')};\n  min-width: ${({minWidth}) => (minWidth ? minWidth : 'initial')};\n  background: ${({background}) => (background ? background : 'none')};\n  border: ${({border}) => (border ? borderConstant.shorthand : '0')};\n  border-radius: ${({borderRadius}) => (borderRadius ? borderRadius : 0)};\n  box-shadow: ${({boxShadow}) => (boxShadow ? boxShadow : 'none')};\n  color: ${({color}) => (color ? color : 'inherit')};\n  text-align: ${({textAlign}) => (textAlign ? textAlign : 'initial')};\n  -webkit-overflow-scrolling: touch;\n`\n\nexport default Section\n","import styled from 'styled-components'\nimport Section from '../section'\n\nconst ScratchCardSC = styled(Section)`\n  position: relative;\n`\nexport default ScratchCardSC\n","import styled from 'styled-components'\nimport Section from '../section'\nconst ScratchCardContentSC = styled(Section)`\n  left: 0;\n  overflow: hidden;\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n  width: 100%;\n  height: auto;\n`\nexport default ScratchCardContentSC\n","import styled from 'styled-components'\n\nconst CanvasWrapperSC = styled.div`\n  cursor: url(./coin.png) 12 12, pointer;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n`\nexport default CanvasWrapperSC\n","/**\n * Get the real offset\n * @param element\n * @returns {Object} offset\n */\nexport const getOffset = (element) => {\n  let offset = {\n    left: 0,\n    top: 0\n  }\n  let clientRect = element.getBoundingClientRect()\n\n  while (element) {\n    offset.top += element.offsetTop\n    offset.left += element.offsetLeft\n    element = element.offsetParent\n  }\n\n  // Calculate the delta between offset values and clientRect values\n  let deltaLeft = offset.left - clientRect.left\n  let deltaTop = offset.top - clientRect.top\n\n  return {\n    left:\n      deltaLeft < 0\n        ? offset.left + Math.abs(deltaLeft)\n        : offset.left - Math.abs(deltaLeft),\n    top:\n      deltaTop < 0\n        ? offset.top + Math.abs(deltaTop)\n        : offset.top - Math.abs(deltaTop)\n  }\n}\n\n/**\n * Make a promise to load image\n * @param src {String}\n */\nexport function loadImage(src) {\n  return new Promise((resolve, reject) => {\n    let image = new Image()\n    image.crossOrigin = 'Anonymous' // Work only if the server response headers contains [Access-Control-Allow-Origin: *]\n    image.onload = () => {\n      resolve(image)\n    }\n    image.src = src\n    image.onerror = (event) => {\n      const error = new Error(`Image ${src} is not loaded.`)\n      reject(error)\n    }\n  })\n}\n","import React from 'react'\nimport throttle from 'lodash.throttle'\n// Components\nimport ScratchCardSC from './scratch-card-sc'\nimport ScratchCardContentSC from './scratch-card-content-sc'\nimport CanvasWrapperSC from './canvas-wrapper-sc'\nimport {getOffset, loadImage} from '../utils'\n\n// accepts only one child as prop\n// if children content of this component overflow, it will be hidden\nclass ScratchCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.ctx = null\n    this.offset = null\n    this.radius = 16\n    this.xPos = null\n    this.yPos = null\n    this.state = {\n      foregroundRendered: false,\n      percentScratched: 0,\n      isCleared: false\n    }\n    // retains same this context for removeEventListener\n    this.scratching = this.scratching.bind(this)\n  }\n  renderForeground() {\n    const {imgURL, isCleared} = this.props\n    if (!isCleared) {\n      const {width, height} = this.refs.canvas\n      if (imgURL) {\n        const image = new Image()\n        image.src = imgURL\n        image.onload = () => {\n          this.ctx.drawImage(image, 0, 0, width, height)\n          // setState needs to be invoked after the image loads if imgURL exists\n          this.setState({foregroundRendered: true})\n        }\n      } else {\n        // default to silver foreground if no image url is provided\n        this.ctx.fillStyle = 'silver'\n        this.ctx.fillRect(0, 0, width, height)\n        this.setState({foregroundRendered: true})\n      }\n    } else {\n      this.setState({foregroundRendered: true})\n    }\n  }\n\n  updatePos(event) {\n    if (event.type === 'mousemove') {\n      this.xPos = event.clientX - this.offset.left\n      this.yPos = event.clientY - this.offset.top\n      return\n    }\n    if (event.type === 'touchmove') {\n      this.xPos = event.touches[0].clientX - this.offset.left - this.radius / 2\n      this.yPos = event.touches[0].clientY - this.offset.top - this.radius / 2\n    }\n  }\n\n  scratching = throttle((event) => {\n    event.preventDefault()\n    this.offset = getOffset(this.refs.canvas)\n    this.updatePos(event)\n    this.ctx.globalCompositeOperation = 'destination-out'\n    this.ctx.save()\n    const {brush} = this.props\n    if (brush === 'brush') {\n      if (this.brushImage === null) {\n        let error = new Error('argument img is not a node IMG')\n        console.error(error.message)\n        return\n      }\n      let angle = Math.atan2(this.yPos, this.xPos)\n      this.ctx.translate(this.xPos, this.yPos)\n      this.ctx.rotate(angle)\n      this.ctx.drawImage(this.brushImage, -this.brushImage.width / 2, -this.brushImage.height / 2)\n    } else {\n      this.ctx.beginPath()\n      this.ctx.arc(this.xPos + this.radius, this.yPos + this.radius, this.radius, 0, Math.PI * 2, false)\n      this.ctx.fill()\n      this.ctx.closePath()\n    }\n    this.ctx.restore()\n    this.updatePercentScratched()\n  }, 40)\n\n  updatePercentScratched() {\n    let counter = 0\n    const {width, height} = this.refs.canvas\n    // Sub-rectangle ratio, determines how much outer space within the image\n    // is being ignored for percentage cleared calculations\n    const {subRectRatio = 1, percentToClear = 50} = this.props\n    const imageData = this.ctx.getImageData(\n      Math.round(((1 - subRectRatio) / 2) * width),\n      Math.round(((1 - subRectRatio) / 2) * height),\n      Math.round(subRectRatio * width),\n      Math.round(subRectRatio * height)\n    )\n    const imageDataLength = imageData.data.length\n    for (let i = 0; i < imageDataLength; i += 4) {\n      if (\n        imageData.data[i] === 0 &&\n        imageData.data[i + 1] === 0 &&\n        imageData.data[i + 2] === 0 &&\n        imageData.data[i + 3] === 0\n      ) {\n        counter++\n      }\n    }\n    const newPercentScratched = Math.round((counter / (subRectRatio * subRectRatio * width * height)) * 10000) / 100\n    this.setState({\n      percentScratched: newPercentScratched\n    })\n    if (newPercentScratched >= percentToClear) {\n      this.clearCard()\n    }\n  }\n\n  clearCard() {\n    const {onClear = () => {}} = this.props\n\n    this.refs.canvas.removeEventListener('mousedown', this.mouseScratch)\n    this.refs.canvas.removeEventListener('touchstart', this.touchScratch)\n    window.removeEventListener('resize', this.recalculateOffset)\n    window.removeEventListener('scroll', this.recalculateOffset)\n\n    this.setState({isCleared: true})\n    onClear()\n  }\n\n  mouseScratch = (event) => {\n    event.preventDefault()\n    const canvas = this.refs.canvas\n    const scratching = this.scratching\n    canvas.addEventListener('mousemove', scratching)\n    document.body.addEventListener('mouseup', function cancelScratch() {\n      canvas.removeEventListener('mousemove', scratching)\n      document.body.removeEventListener('mouseup', cancelScratch)\n    })\n  }\n\n  touchScratch = (event) => {\n    event.preventDefault()\n    const canvas = this.refs.canvas\n    const scratching = this.scratching\n    canvas.addEventListener('touchmove', scratching)\n    document.body.addEventListener('touchend', function cancelScratch() {\n      canvas.removeEventListener('touchmove', scratching)\n      document.body.removeEventListener('touchend', cancelScratch)\n    })\n  }\n\n  recalculateOffset = throttle(() => (this.offset = getOffset(this.refs.canvas)), 40)\n\n  componentDidMount() {\n    if (this.props.brush === 'brush') {\n      loadImage('/brush.png').then((image) => {\n        this.brushImage = image\n      })\n    }\n    this.ctx = this.refs.canvas.getContext('2d')\n    this.renderForeground()\n    this.refs.canvas.addEventListener('mousedown', this.mouseScratch)\n    this.refs.canvas.addEventListener('touchstart', this.touchScratch)\n    window.addEventListener('resize', this.recalculateOffset)\n    window.addEventListener('scroll', this.recalculateOffset)\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.isCleared !== prevProps.isCleared) {\n      if (this.props.isCleared) {\n        this.clearCard()\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const {isCleared} = this.state\n    // remove event listeners safely if they haven't been removed by this.clearCard()\n    if (!isCleared) {\n      this.refs.canvas.removeEventListener('mousedown', this.mouseScratch)\n      this.refs.canvas.removeEventListener('touchstart', this.touchScratch)\n      window.removeEventListener('resize', this.recalculateOffset)\n      window.removeEventListener('scroll', this.recalculateOffset)\n    }\n  }\n\n  render() {\n    const {children, height, width} = this.props\n    const {foregroundRendered, isCleared} = this.state\n\n    return (\n      <div>\n        <ScratchCardSC width={`${width}px`} height={`${height}px`}>\n          {foregroundRendered && (\n            <ScratchCardContentSC display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n              {React.Children.only(children)}\n            </ScratchCardContentSC>\n          )}\n          {!isCleared && (\n            <CanvasWrapperSC>\n              <canvas\n                onContextMenu={(event) => event.preventDefault()}\n                ref=\"canvas\"\n                width={`${width}px`}\n                height={`${height}px`}\n              />\n            </CanvasWrapperSC>\n          )}\n        </ScratchCardSC>\n      </div>\n    )\n  }\n}\n\nexport default ScratchCard\n","import styled from 'styled-components'\n\nimport Spacing from '../spacing'\n\nconst FlexItem = styled(Spacing)`\n  flex: ${({flex}) => flex || '1 1 auto'};\n  min-width: 0;\n`\n\nexport default FlexItem\n","const STORAGE_KEYS = {\n  CLEARED: 'cleared',\n  IMG_SRC: 'imgUrl',\n  PRIZE_ID: 'prizeId',\n  SESSION_ID: 'sessionId'\n}\n\nexport const isCleared = () => {\n  return Boolean(window.localStorage.getItem(STORAGE_KEYS.CLEARED))\n}\n\nexport const setCleared = (value) => {\n  window.localStorage.setItem(STORAGE_KEYS.CLEARED, value)\n}\n\nexport const setLocalStorage = ({sessionId, prize}) => {\n  const {IMG_SRC, PRIZE_ID, SESSION_ID} = STORAGE_KEYS\n  if (window.localStorage.getItem(SESSION_ID) !== sessionId) {\n    window.localStorage.clear()\n    window.localStorage.setItem(SESSION_ID, sessionId)\n    window.localStorage.setItem(PRIZE_ID, prize.id)\n    window.localStorage.setItem(IMG_SRC, prize.imageSrc)\n  }\n}\n\nexport const getImageSrc = () => {\n  return window.localStorage.getItem(STORAGE_KEYS.IMG_SRC)\n}\n\nexport const getSessionId = () => {\n  return window.localStorage.getItem(STORAGE_KEYS.SESSION_ID)\n}\n","import React from 'react'\n\nimport ScratchCard from '../scratch-card'\nimport Flex from '../flex'\nimport FlexItem from '../flex/flex-item'\nimport {\n  isCleared,\n  setCleared,\n  setLocalStorage,\n  getImageSrc,\n  getSessionId\n} from '../local-storage'\n\nclass MainPage extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      loaded: false,\n      isCleared: false\n    }\n    this.handleCleared = this.handleCleared.bind(this)\n  }\n\n  handleCleared() {\n    setCleared(true)\n  }\n\n  async componentDidMount() {\n    const response = await fetch('/prizes', {\n      method: 'post',\n      body: JSON.stringify({\n        sessionId: getSessionId() || ''\n      }),\n      headers: {'Content-type': 'application/json'}\n    })\n    const data = await response.json()\n    setLocalStorage(data)\n\n    this.setState({loaded: true})\n    if (isCleared()) {\n      this.setState({isCleared: true})\n    }\n  }\n\n  render() {\n    const {loaded, isCleared} = this.state\n    const imgSrc = getImageSrc() || '/background.gif'\n    return (\n      loaded && (\n        <div className=\"App\">\n          <header className=\"App-header\">\n            <div className=\"Game\">\n              <h4 className=\"card-header\">THANKS FOR PARTICIPATING!</h4>\n              <Flex>\n                <FlexItem margin=\"sm\">\n                  <ScratchCard\n                    isCleared={isCleared}\n                    brush=\"brush\"\n                    width={300}\n                    height={300}\n                    percentToClear={50}\n                    subRectRatio={0.7}\n                    imgURL=\"./overlay.gif\"\n                    onClear={this.handleCleared}\n                  >\n                    <img\n                      width={300}\n                      height={300}\n                      src={imgSrc}\n                      alt=\"scratch card\"\n                    />\n                  </ScratchCard>\n                </FlexItem>\n              </Flex>\n            </div>\n          </header>\n        </div>\n      )\n    )\n  }\n}\n\nexport default MainPage\n","import styled from 'styled-components'\nimport {border, colors, layout, neutrals} from '../constants'\n\nconst ButtonSC = styled.button.attrs({type: 'button'})`\n  width: ${({fullWidth}) => (fullWidth ? '100%' : 'auto')};\n  padding: 0;\n  border: 1px solid ${colors.messengerBlue};\n  border-radius: ${border.radius};\n  background: ${colors.white};\n  outline: none;\n  color: ${colors.messengerBlue};\n  vertical-align: middle;\n  transition: 0.2s ease-out all;\n  -webkit-appearance: none;\n  &:active,\n  &:focus {\n    background: ${neutrals.neutral10};\n    color: ${colors.messengerBlue};\n  }\n\n  &[disabled] {\n    background: ${colors.white};\n    border-color: ${neutrals.neutral20};\n    color: ${neutrals.neutral20};\n  }\n\n  ${({circle}) =>\n    circle &&\n    `\n    border-radius: 100%;\n  `};\n\n  ${({pill}) =>\n    pill &&\n    `\n    border-width: 3px;\n    border-radius: ${layout.tapSize};\n  `};\n\n  ${({raised}) =>\n    raised &&\n    `\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n    &:active {\n      box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);\n    }\n  `};\n`\nexport default ButtonSC","import styled from 'styled-components'\nimport {\n  fontSizes,\n  fontWeight,\n  layout,\n  spacing,\n  typography,\n  unit,\n} from '../constants'\n\nconst ButtonInner = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: ${unit * 8}px;\n  min-height: ${unit * 4.25}px;\n  padding: ${layout.unit} ${spacing.md};\n  font-family: ${typography.fontFamily};\n  font-weight: ${fontWeight.semiBold};\n  text-align: center;\n`\n\nconst sizeConfig = {\n  sm: '24px',\n  md: '32px',\n  lg: '44px',\n}\n\n/**\n * Returns CSS dimensions based on size\n * @param {Object} object CSS object may or may not have size\n * @returns {string} CSS properties as string\n */\nconst dimensions = ({size}) =>\n  size &&\n  `\n    min-width: ${sizeConfig[size] ? sizeConfig[size] : `${unit * 8}px`};\n    min-height: ${sizeConfig[size] ? sizeConfig[size] : `${unit * 4.25}px`};\n    padding-right: ${spacing.xlg};\n    padding-left: ${spacing.xlg};\n  `\n\n/**\n * Returns CSS dimensions based on pill\n * @param {Object} object CSS object may or may not have pill\n * @returns {string} CSS properties as string\n */\nconst pillStyles = ({pill}) =>\n  pill &&\n  `\n    padding-right: ${layout.tapSize};\n    padding-left: ${layout.tapSize};\n    font-size: ${fontSizes.small};\n    letter-spacing: 0.05em;\n  `\n\n/**\n * Returns CSS dimensions based on cricle and size\n * @param {Object} object CSS object may or may not have circle\n * @returns {string} CSS properties as string\n */\nconst circleStyles = ({circle, size}) =>\n  circle &&\n  `\n    min-width: ${sizeConfig[size] ? sizeConfig[size] : '44px'};\n    min-height: ${sizeConfig[size] ? sizeConfig[size] : '44px'};\n    padding: 0;\n\n    ${size === 'sm' &&\n      `\n      svg {\n        width: 16px;\n        height: 16px;\n      }\n    `}\n  `\n\n/**\n * Returns CSS dimensions based on leftAligned\n * @param {Object} object CSS object may or may not have leftAligned\n * @returns {string} CSS properties as string\n */\nconst alignment = ({leftAligned}) =>\n  leftAligned &&\n  `\n    text-align: left;\n    justify-content: flex-start;\n  `\n\n/**\n * @prop {boolean} leftAligned\n * @prop {boolean} pill\n * @prop {boolean} circle\n * @prop {string}  size - [sm, md, lg]\n */\nconst ButtonInnerSC = styled(ButtonInner)`\n  ${dimensions};\n  ${alignment};\n  ${circleStyles};\n  ${pillStyles};\n`\nexport default ButtonInnerSC","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nimport {marginSpacing} from '../spacing'\n\nimport ButtonOuterSC from './button-outer-sc'\nimport ButtonInnerSC from './button-inner-sc'\n\n/**\n * Returns ButtonSC based on CSS props\n * @param {Object} props object containing CSS styling properties\n * @returns {JSX} ButtonSC styled based on props\n */\nconst Button = (props) => {\n  const {children, circle, leftAligned, pill, size} = props\n\n  // children={null} is used to prevent infinite children\n  // prettier-ignore\n  return (\n    <ButtonOuterSC {...props} children={null}>\n      <ButtonInnerSC\n          circle={circle}\n          size={size}\n          leftAligned={leftAligned}\n          pill={pill}\n      >\n        {children}\n      </ButtonInnerSC>\n    </ButtonOuterSC>\n  )\n}\n\n/* eslint-enable react/no-children-prop */\nButton.propTypes = {\n  children: PropTypes.node,\n  circle: PropTypes.bool,\n  leftAligned: PropTypes.bool,\n  pill: PropTypes.bool,\n  raised: PropTypes.bool,\n  size: PropTypes.oneOf(['sm', 'md', 'lg']),\n}\n\nconst ButtonSC = styled(Button)`\n  ${marginSpacing};\n`\nexport default ButtonSC","import styled from 'styled-components'\n\nimport {colors} from '../../constants'\nimport Button from '../button'\n\nconst PrimaryButton = styled(Button)`\n  background: ${colors.messengerBlue};\n  color: ${colors.white};\n\n  &:focus {\n    background: ${colors.messengerBlue};\n    color: ${colors.white};\n  }\n\n  &:active {\n    background: ${colors.darkBlue};\n    color: ${colors.white};\n  }\n  &[disabled] {\n    background: ${colors.lightBlue};\n    border-color: ${colors.lightBlue};\n    color: ${colors.white};\n  }\n`\nexport default PrimaryButton","import styled from 'styled-components'\nimport {colors} from '../../constants'\nimport PrimaryButton from './primary-button'\n\nexport default styled(PrimaryButton)`\n  ${({outline}) =>\n    outline &&\n    `\n  border-color: ${colors.white};\n`};\n`\n","import React from 'react'\nimport {Pie} from 'react-chartjs-2/'\n\nimport Spacing from './spacing'\nimport {colors} from './constants'\n\nconst COLORS = {\n  AVAILABLE: colors.red,\n  ASSIGNED: colors.yellow,\n  REDEEMED: colors.blue\n}\n\nconst PieChart = ({inventory = {}}) => {\n  const {available, assigned, redeemed} = inventory\n  const data = {\n    labels: ['Available', 'Assigned', 'Redeemed'],\n    datasets: [\n      {\n        data: [available, assigned, redeemed],\n        backgroundColor: [COLORS.AVAILABLE, COLORS.ASSIGNED, COLORS.REDEEMED],\n        hoverBackgroundColor: [\n          COLORS.AVAILABLE,\n          COLORS.ASSIGNED,\n          COLORS.REDEEMED\n        ]\n      }\n    ]\n  }\n\n  const options = {\n    legend: {\n      labels: {\n        fontColor: colors.white,\n        fontSize: 16\n      }\n    }\n  }\n\n  return (\n    <Spacing margin=\"md\">\n      <Pie width={250} height={250} data={data} options={options} />\n    </Spacing>\n  )\n}\n\nexport default PieChart\n","import React from 'react'\nimport PrimaryButton from './buttons/primary-button'\n\nimport FlexItem from './flex/flex-item'\nimport PieChart from './pie-chart'\n\nconst PrizeItem = ({id, imageSrc, inventory, name, redeemPrize}) => (\n  <FlexItem margin=\"sm\">\n    <h5>{name}</h5>\n    <img width={250} height={250} src={imageSrc} alt=\"prize item\" />\n    <PieChart inventory={inventory} />\n    <PrimaryButton onClick={() => redeemPrize(id)}>\n      Redeem One Prize\n    </PrimaryButton>\n  </FlexItem>\n)\n\nexport default PrizeItem\n","import React from 'react'\nimport {toast} from 'react-toastify'\nimport debounce from 'lodash.debounce'\nimport PrimaryButton from '../buttons/primary-button'\n\nimport PrizeItem from '../prize-item'\nimport Flex from '../flex'\n\nclass AdminPage extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      inventory: {},\n      successRate: 100,\n      intervalId: null\n    }\n    this.updateStatus = this.updateStatus.bind(this)\n    this.resetAssigned = this.resetAssigned.bind(this)\n    this.redeemPrize = this.redeemPrize.bind(this)\n  }\n\n  async updateStatus() {\n    const response = await fetch('/status')\n    const {inventory, successRate} = await response.json()\n    this.setState({inventory, successRate})\n  }\n\n  resetAssigned = debounce(async () => {\n    const response = await fetch('/prizes/reset', {\n      method: 'post'\n    })\n    const {inventory, resetCount} = await response.json()\n    toast(`Reset ${resetCount} prizes from assigned to available!`)\n    this.setState({inventory})\n  }, 400)\n\n  redeemPrize = debounce(async (id) => {\n    const response = await fetch(`/prizes/${id}/redeem`, {\n      method: 'post'\n    })\n    const {inventory, error} = await response.json()\n    if (error) {\n      toast(error)\n    } else {\n      this.setState({inventory})\n      toast(`One ${inventory[id].name} has been redeemed!`)\n    }\n  }, 400)\n\n  componentDidMount() {\n    this.updateStatus()\n    const intervalId = setInterval(this.updateStatus, 5000)\n    this.setState({intervalId})\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.state.intervalId)\n  }\n\n  render() {\n    // @todo: allow user to see and edit success rate\n    const {inventory, successRate} = this.state\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          {inventory && (\n            <React.Fragment>\n              <Flex alignItems=\"center\" margin=\"sm\">\n                {Object.values(inventory).map((item) => (\n                  <PrizeItem {...item} redeemPrize={this.redeemPrize} />\n                ))}\n              </Flex>\n              <PrimaryButton onClick={this.resetAssigned}>\n                Reset Assigned Prizes\n              </PrimaryButton>\n            </React.Fragment>\n          )}\n        </header>\n      </div>\n    )\n  }\n}\n\nexport default AdminPage\n","import React from 'react'\nimport {BrowserRouter as Router, Route} from 'react-router-dom'\nimport {toast} from 'react-toastify'\n\n// CSS\nimport './App.css'\nimport 'react-toastify/dist/ReactToastify.css'\n\n// Pages\nimport MainPage from './pages/main-page'\nimport AdminPage from './pages/admin-page'\n\n// Configures toast messages\ntoast.configure({\n  autoClose: 8000,\n  className: 'toast-container',\n  position: toast.POSITION.TOP_CENTER\n})\n\nconst App = () => (\n  <Router>\n    <Route exact path=\"/\" component={MainPage} />\n    <Route exact path=\"/admin\" component={AdminPage} />\n  </Router>\n)\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}